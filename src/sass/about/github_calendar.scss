@use 'sass:map';

.github-calendar {
  display: grid;
  gap: 0.75em;
  padding: 0.5em 0;

  --cell: 11px;
  --gap: 3px;

  /* Single-accent scale (light mode): use light-mode accent */
  --lvl0: rgb(0 0 0 / 7%);

  /* Use accent color directly with varying opacity */
  --lvl1: #{rgba(map.get($light-colors, danger), 0.25)};
  --lvl2: #{rgba(map.get($light-colors, danger), 0.45)};
  --lvl3: #{rgba(map.get($light-colors, danger), 0.65)};
  --lvl4: #{rgba(map.get($light-colors, danger), 0.90)};

  .github-calendar-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 1em;
  }

  .github-calendar-meta {
    display: flex;
    flex-direction: column;
    gap: 0.15em;
  }

  .github-calendar-count {
    font-size: clamp(1.1rem, 2vw, 1.3rem);
    font-weight: 500;
    opacity: 0.85;
  }

  .github-calendar-link {
    font-weight: 600;
    text-decoration: none;
    border-bottom: 1px solid currentcolor;
    opacity: 0.85;
    &:hover { opacity: 1; }
  }

  .github-calendar-loading,
  .github-calendar-error {
    opacity: 0.85;
  }

  .github-calendar-grid {
    width: 100%;
    max-width: 950px;
    display: grid;
    grid-auto-flow: column;
    grid-template-rows: repeat(7, var(--cell));
    gap: var(--gap);
    padding: 0.75em;
    border-radius: 16px;
    border: 1px solid rgb(0 0 0 / 6%);
    background: #fff;
    box-shadow: 0 8px 24px -16px rgb(0 0 0 / 18%);
    overflow-x: auto;
  }

  .cell {
    width: var(--cell);
    height: var(--cell);
    border-radius: 3px;
    background: var(--lvl0);
    box-shadow: 0 0 0 1px rgb(0 0 0 / 4%) inset; /* keep cells legible in light mode */
  }
  .cell[data-level='1'] { background: var(--lvl1); }
  .cell[data-level='2'] { background: var(--lvl2); }
  .cell[data-level='3'] { background: var(--lvl3); }
  .cell[data-level='4'] { background: var(--lvl4); }

  .github-calendar-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5em;
    margin-top: 0.5em;
  }

  .github-calendar-legend {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0.6em;
    opacity: 0.85;
  }

  .legend-cells {
    display: inline-flex;
    align-items: center;
    gap: var(--gap);
  }
}

.dark .github-calendar {
  /* Single-accent scale (dark mode): use dark-mode accent */
  --lvl0: rgb(255 255 255 / 10%);
  --lvl1: #{rgba(map.get($dark-colors, danger), 0.28)};
  --lvl2: #{rgba(map.get($dark-colors, danger), 0.48)};
  --lvl3: #{rgba(map.get($dark-colors, danger), 0.70)};
  --lvl4: #{rgba(map.get($dark-colors, danger), 0.92)};

  .github-calendar-grid {
    background: #0f1111;
    border-color: rgb(255 255 255 / 10%);
    box-shadow: 0 12px 36px -12px rgb(0 0 0 / 60%);
  }
}

